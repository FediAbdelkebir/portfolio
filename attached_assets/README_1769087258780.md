# KYC Controls Engine Demo App

Angular 18 application for KYC (Know Your Customer) controls engine demonstration.

## Quick Start

```bash
# Install dependencies
npm install

# Start development server
npm start

# Navigate to http://localhost:4200/
```

## Project Overview

This application demonstrates a KYC controls engine built with Angular 18. It provides functionality for:
- User authentication
- Document upload and management
- Folder management
- Control execution and results visualization
- Multi-language support (French/English)

## Documentation

- **[Developer Guide](./DEVELOPER_GUIDE.md)** - Comprehensive guide for developers
- **[Code Quality Improvements](./CODE_QUALITY_IMPROVEMENTS.md)** - Recent improvements and patterns
- **[Documentation](./Documentation.md)** - Business logic and architecture
- **[Troubleshooting](./TROUBLESHOOTING.md)** - Common issues and solutions

## Development

### Prerequisites
- Node.js 18.x or later
- npm 9.x or later
- Angular CLI 18.x

### Available Scripts

```bash
npm start          # Start development server (http://localhost:4200)
npm run start:mock # Start dev server with mocked APIs
npm run build      # Build for production
npm test           # Run unit tests
npm run lint       # Run ESLint
npm run lint:fix   # Fix linting issues automatically
```

### Project Structure

```
src/app/
├── core/                    # Core functionality, singleton services
│   ├── base/               # Base classes (BaseComponent)
│   ├── interceptors/       # HTTP interceptors (Auth, Error, Loading)
│   ├── models/             # Data models and interfaces
│   └── services/           # Core services (Storage, Logger, Auth, etc.)
├── modules/                # Feature modules
│   ├── kyc-controls-demo/      # Main demo functionality
│   ├── kyc-controls-lib/       # Core controls library
│   ├── kyc-controls-login/     # Authentication
│   ├── kyc-controls-kie/       # KIE integration
│   ├── kyc-controls-manage-document/  # Document management
│   └── kyc-controls-manage-folder/    # Folder management
└── shared/                 # Shared components and utilities
    ├── components/         # Reusable components (navbar, toasts, etc.)
    └── utils.ts           # Utility functions
```

## Key Features

### Core Services
- **StorageService**: Centralized browser storage management
- **LoggerService**: Structured logging with environment-based levels
- **ToastService**: User notifications and messaging
- **AuthenticationService**: User authentication and token management

### HTTP Interceptors
- **AuthInterceptor**: Automatic Bearer token injection
- **ErrorInterceptor**: Centralized error handling and user feedback
- **LoadingInterceptor**: Global loading state management

### Best Practices Implemented
- ✅ Memory leak prevention with BaseComponent
- ✅ Type-safe API calls
- ✅ Centralized error handling
- ✅ Structured logging
- ✅ Automatic auth header injection
- ✅ Reactive programming patterns

## Building for Production

```bash
npm run build -- --configuration production
```

Build artifacts will be stored in the `dist/` directory.

## Docker Deployment

```bash
# Build Docker image
docker build -t kyc-controls-app .

# Or use docker-compose
docker-compose up
```

The application will be available at `http://localhost:8080` (configured in docker-compose.yml).

## Testing

```bash
# Run unit tests
npm test

# Run tests with coverage
npm test -- --coverage

# Run linting
npm run lint
```

## Mock Run Mode

Use the dedicated mock configuration to exercise the UI without reaching external services:

```bash
npm run start:mock
```

This mode:
- Returns a deterministic mock token for the authentication flow
- Serves the `exemple_reponse.json` payload for SMC orchestrator calls
- Keeps production and CI/CD builds unchanged

## Code Quality

This project follows strict code quality standards:
- ESLint for code linting
- Prettier for code formatting
- TypeScript strict mode
- Comprehensive unit testing
- Memory leak prevention
- Type safety enforcement

See [CODE_QUALITY_IMPROVEMENTS.md](./CODE_QUALITY_IMPROVEMENTS.md) for detailed implementation.

## Environment Configuration

The application uses environment files for configuration:
- `src/environments/environment.ts` - Development
- `src/environments/environment.prod.ts` - Production
- `src/environments/environment.mock.ts` - Mock/test run mode for local testing

Configuration includes:
- API endpoints
- Feature flags
- PDF size limits
- Version information

## Internationalization

The application supports multiple languages:
- French (default)
- English

Translation files are located in `src/assets/i18n/`.

## Contributing

1. Follow the patterns defined in [DEVELOPER_GUIDE.md](./DEVELOPER_GUIDE.md)
2. Extend `BaseComponent` for all components
3. Use `takeUntil(this.destroy$)` for subscriptions
4. Use `LoggerService` instead of console.*
5. Use `StorageService` instead of direct localStorage access
6. Write unit tests for new features
7. Run linting before committing: `npm run lint:fix`

## License

[License information]

## Support

For issues and questions:
1. Check the [Troubleshooting Guide](./TROUBLESHOOTING.md)
2. Review [Developer Guide](./DEVELOPER_GUIDE.md)
3. Contact the development team
